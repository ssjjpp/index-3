<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div class="box">
        <input type="text" placeholder="请输入身份证号">
    </div>
    <script src="js/jquery-2.1.1.min.js"></script>
    <script>
        $(document).ready(function() {
            $('input').on('blur', function() {
                var num = $(this).val();
                isCardNo(num);
            });

            function isCardNo(card) {
                // 身份证号码为15位或者18位，15位时全为数字，18位前17位为数字，最后一位是校验位，可能为数字或字符X 
                var reg = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
                if (reg.test(card) === false) {
                    alert("身份证输入不合法");
                    return false;
                } else {
                    var last = card.substring(card.length - 4, card.length);
                    var lastNum = card.replace(last, '****');
                    // var bnum = card.substring(6, 10);
                    // var reg = new RegExp('\\' + bnum, 'g')
                    // lastNum = card.replace(reg, '<b style="color:red">' + bnum + '</b>')
                    // console.log(lastNum)
                    $('input').val(lastNum);
                }
            }
        })
    </script>
</body>

</html>